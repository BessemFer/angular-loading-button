/**
 * angular-loading-button - v0.0.0 - 08/08/2014
 * Loading button directive for AngularJS
 * https://github.com/tiste/angular-loading-button
 * Licensed WTFPL
 */
angular.module("loadingButton",[]).factory("loadingButton",["$log",function(){return{dropper:function(a){return this.inc(a,.02*Math.random())},inc:function(a,b){return a=this.limit(a+b,.05,.95),this.set(a)},limit:function(a,b,c){var d=a;return b>a&&(d=b),a>c&&(d=c),d},set:function(a){return this.limit(a,.05,1)}}}]).directive("loadingButton",["$log","$interval","$timeout","loadingButton",function(a,b,c,d){return{restrict:"E",transclude:!0,replace:!0,scope:{completed:"=",error:"=",success:"=",value:"="},template:'            <div class="progress-button">              <button>                <span class="default" ng-transclude></span>                <span class="error">{{error}}</span>                <span class="success">{{success}}</span>              </button>              <svg class="progress-circle" width="70" height="70"><path d="m35,2.5c17.955803,0 32.5,14.544199 32.5,32.5c0,17.955803 -14.544197,32.5 -32.5,32.5c-17.955803,0 -32.5,-14.544197 -32.5,-32.5c0,-17.955801 14.544197,-32.5 32.5,-32.5z"/></svg>            </div>          ',link:function(a,e){"undefined"==typeof a.value&&(a.value=0);var f,g=!1,h=function(){g=!0,e.addClass("loading"),f=b(function(){a.value<.95&&(a.value=d.dropper(a.value))},500)},i=function(d){a.completed=void 0,a.value=1,b.cancel(f),e.removeClass("loading"),e.addClass(d?"success":"error"),c(function(){e.removeClass("success error"),g=!1,a.value=0},2e3)};e.bind("click",function(){g||h()}),a.$watch("completed",function(b){g?1==b?i(!0):0==b&&i(!1):a.completed=void 0}),a.$watch("value",function(a){a>0&&!g&&h()})}}}]);